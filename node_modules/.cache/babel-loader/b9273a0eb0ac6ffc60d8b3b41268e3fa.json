{"ast":null,"code":"var _jsxFileName = \"/Users/Fitz/Sites/rocks/andrewfitzpatrickrocks/src/components/Nav.js\";\nimport React, { Component } from 'react';\n\nclass MoveEvent {\n  constructor() {\n    this.listeners = [];\n  }\n\n  register(f) {\n    this.listeners.push(f);\n  }\n\n  unregister(f) {\n    this.listeners.splice(this.listeners.indexOf(f), 1);\n  }\n\n  fire(params) {\n    this.listeners.forEach(listener => {\n      listener(params);\n    });\n  }\n\n}\n\nclass Nav extends Component {\n  constructor(props) {\n    super(props);\n    this.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    let left = props.children.map(o => this.width);\n\n    if (left.length > 0) {\n      left[0] = 0;\n    }\n\n    this.state = {\n      page: 0,\n      left: left,\n      from: left\n    };\n    this.pages = {};\n    this.eventer = new MoveEvent();\n  }\n\n  move(page) {\n    const left = this.state.left.slice();\n    const from = left.slice();\n\n    if (page >= left.length) {\n      page = 0;\n    }\n\n    for (let i = 0; i < left.length; i++) {\n      if (i < page) {\n        left[i] = -this.width;\n      } else if (i === page) {\n        left[i] = 0;\n      } else {\n        left[i] = this.width;\n      }\n    }\n\n    this.setState({\n      left: left,\n      page: page,\n      from: from\n    });\n    this.eventer.fire();\n  }\n\n  componentDidMount() {\n    this.move(this.pages[window.location.hash.slice(1)]);\n  }\n\n  componentWillMount() {\n    window.onhashchange = e => {\n      const i = e.newURL.indexOf('#');\n      const hash = e.newURL.slice(i + 1);\n      this.move(this.pages[hash]);\n      this.eventer.fire();\n    };\n  }\n\n  render() {\n    const pageElements = React.Children.map(this.props.children, (page, idx) => {\n      const element = React.cloneElement(page, {\n        left: this.state.left[idx],\n        from: this.state.from[idx],\n        eventer: this.eventer\n      });\n      this.pages[element.props.path.slice(1)] = idx;\n      return element;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, pageElements);\n  }\n\n}\n\nexport default Nav;","map":{"version":3,"sources":["/Users/Fitz/Sites/rocks/andrewfitzpatrickrocks/src/components/Nav.js"],"names":["React","Component","MoveEvent","constructor","listeners","register","f","push","unregister","splice","indexOf","fire","params","forEach","listener","Nav","props","width","window","innerWidth","document","documentElement","clientWidth","body","left","children","map","o","length","state","page","from","pages","eventer","move","slice","i","setState","componentDidMount","location","hash","componentWillMount","onhashchange","e","newURL","render","pageElements","Children","idx","element","cloneElement","path"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\n\nclass MoveEvent {\n\n    constructor() {\n        this.listeners = [];\n    }\n\n    register(f) {\n        this.listeners.push(f);\n    }\n\n    unregister(f) {\n        this.listeners.splice(this.listeners.indexOf(f), 1);\n    }\n\n    fire(params) {\n        this.listeners.forEach((listener) => {\n            listener(params);\n        });\n\n    }\n}\n\nclass Nav extends Component {\n\n    constructor(props) {\n        super(props);\n        this.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n        let left = props.children.map(o => this.width);\n        if (left.length > 0 ) {\n            left[0] = 0;\n        }\n        this.state = {page: 0, left: left, from: left};\n        this.pages = {};\n        this.eventer = new MoveEvent();\n    }\n\n    move(page) {\n        const left = this.state.left.slice();\n        const from = left.slice();\n        if (page >= left.length) {\n          page = 0;\n        }\n        for (let i = 0; i < left.length; i++ ) {\n          if (i < page) {\n            left[i] = -this.width;\n          } else if (i === page) {\n            left[i] = 0;\n          } else {\n            left[i] = this.width;\n          }\n        }\n        this.setState({left: left, page: page, from: from});\n        this.eventer.fire();\n      }\n\n    componentDidMount() {\n        this.move(this.pages[window.location.hash.slice(1)]);\n    }\n\n    componentWillMount() {\n        window.onhashchange = (e) => {\n            const i = e.newURL.indexOf('#');\n            const hash = e.newURL.slice(i + 1);\n            this.move(this.pages[hash]);\n            this.eventer.fire();\n        };\n    }\n\n\n    render() {\n        const pageElements = React.Children.map(this.props.children, (page, idx) => {\n            const element = React.cloneElement(page, { left: this.state.left[idx], from: this.state.from[idx], eventer:this.eventer });\n            this.pages[element.props.path.slice(1)] = idx;\n            return element;\n        });\n        return (\n            <div>\n                {pageElements}\n            </div>\n        );\n    }\n\n}\n\nexport default Nav;"]},"metadata":{},"sourceType":"module"}